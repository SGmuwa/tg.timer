# kt.pizza
Данный репозиторий содержит бот оповещения о пицце:

* `telegram.py`

## Пример запуска

### Unix like

```bash
./telegram.py
```

### WindowsNT

```cmd
python3 telegram.py
```

## Переменные среды

| Название               | Значение по-умолчанию                 | Допустимые значения                          | Описание   |
|------------------------|---------------------------------------|----------------------------------------------|------------|
| `TELEGRAM_SECRET_PATH` | `./secret.json5`                      | any path example `/run/checks/secret.json5`  | Место в файловой системе, где хранятся секретные настройки.
| `TELEGRAM_SECRET`      | None                                  | Содержимое файла `secret.json5`              | Вместо пути `TELEGRAM_SECRET_PATH` можно передать содержимое json файла прям в этой переменной.
| `LOGURU_LEVEL`         | `DEBUG`                               | `TRACE`, `DEBUG`, `INFO`, `WARNING`, `ERROR` | Уровень журналирования информации в консоль.

Если вдруг заданы одновременно `TELEGRAM_SECRET_PATH` и `TELEGRAM_SECRET`, то будет использован `TELEGRAM_SECRET`.

## Заполнение secret.json

Есть два варианта заполнения `secret.json5`

1. Безопасный двухшаговый
2. Простой одношаговый

### 1. Безопасный двухшаговый

Если не хотите делиться `api_id` и `api_hash` с хостингом где будет крутиться скрипт, то следуйте шагам.

#### Шаг 1

Сначала запустите telegram.py с заполненными полями как в файле `step1.example.secret.json5`. Вам программа должна выдать `session_and_auth_key`.

#### Шаг 2

Удалите лишние поля и добавьте необходимые как в файле `step2.example.secret.json5`.

### 2. Простой одношаговый

Объедините два файла

1. `step1.example.secret.json5`
2. `step2.example.secret.json5`

в один и заполните поля. Дублирующие поля удалите.

Для заполнения `session_and_auth_key` запустите сначала без поля `session_and_auth_key`, скрипт подскажет его значение.
